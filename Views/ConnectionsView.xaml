<UserControl x:Class="SalesforceDebugAnalyzer.Views.ConnectionsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">
    
    <UserControl.Resources>
        <!-- Discord Card Style -->
        <Style x:Key="GlassCard" TargetType="Border">
            <Setter Property="Background" Value="#2B2D31"/>
            <Setter Property="BorderBrush" Value="#3F4147"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Black" Opacity="0.3" BlurRadius="20" ShadowDepth="8" Direction="270"/>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Feature Card Style -->
        <Style x:Key="FeatureCard" TargetType="Border">
            <Setter Property="Background" Value="#2B2D31"/>
            <Setter Property="BorderBrush" Value="#3F4147"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="24"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Black" Opacity="0.2" BlurRadius="12" ShadowDepth="4" Direction="270"/>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Hero Button Style -->
        <Style x:Key="HeroButton" TargetType="Button">
            <Setter Property="Background" Value="#5865F2"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Height" Value="56"/>
            <Setter Property="Padding" Value="48,0"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#4752C4"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#3C45A5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Secondary Button Style -->
        <Style x:Key="SecondaryButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#DBDEE1"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Height" Value="48"/>
            <Setter Property="Padding" Value="32,0"/>
            <Setter Property="BorderBrush" Value="#4E5058"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#4E5058"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>
    
    <Grid Background="#313338">
        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <Grid Margin="24,24,24,24">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="24"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- Hero Card -->
                <Border Grid.Row="0" Style="{StaticResource GlassCard}" 
                        Padding="32,48,32,48" HorizontalAlignment="Stretch" MaxWidth="800">
                    <StackPanel>
                    <!-- Logo & Title -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,24">
                        <Border Background="#ED4245" CornerRadius="12" Width="56" Height="56" Margin="0,0,16,0">
                            <materialDesign:PackIcon Kind="Spider" Width="32" Height="32" 
                                                     Foreground="White" VerticalAlignment="Center" 
                                                     HorizontalAlignment="Center"/>
                        </Border>
                        <StackPanel VerticalAlignment="Center">
                            <TextBlock Text="Black Widow" FontSize="32" FontWeight="Bold" 
                                       Foreground="#DBDEE1" LineHeight="38"/>
                        </StackPanel>
                    </StackPanel>
                    
                    <!-- Tagline -->
                    <TextBlock Text="Catch Every Bug in Your Web" 
                               FontSize="20" 
                               Foreground="#B5BAC1"
                               HorizontalAlignment="Center"
                               TextAlignment="Center"
                               Margin="0,0,0,8"
                               LineHeight="30"
                               FontWeight="SemiBold"/>
                    
                    <TextBlock Text="Trap bugs in your Salesforce logs. Hunt them down. No escape." 
                               FontSize="14" 
                               Foreground="#80848E"
                               HorizontalAlignment="Center"
                               TextAlignment="Center"
                               Margin="0,0,0,24"
                               LineHeight="24"
                               TextWrapping="Wrap"/>
                    
                    <!-- CTA Buttons -->
                    <StackPanel HorizontalAlignment="Stretch" MaxWidth="400">
                        <Button Content="Start Hunting ðŸ•·ï¸"
                                Style="{StaticResource HeroButton}"
                                Click="ConnectProduction_Click"
                                Margin="0,0,0,16"/>
                        
                        <Button Content="Connect to Sandbox"
                                Style="{StaticResource SecondaryButton}"
                                Click="ConnectSandbox_Click"
                                Margin="0,0,0,16"/>
                        
                        <!-- Manual Token Section -->
                        <Expander Header="ðŸ”§ Advanced: Manual Token"
                                  Foreground="#B5BAC1"
                                  FontSize="13"
                                  HorizontalAlignment="Stretch">
                            <Border Background="#2B2D31" 
                                    CornerRadius="8" 
                                    Padding="20"
                                    Margin="0,8,0,0"
                                    BorderBrush="#3F4147"
                                    BorderThickness="1">
                                <StackPanel>
                                    <TextBlock Text="For developers using Salesforce CLI or Workbench" 
                                               TextWrapping="Wrap"
                                               Foreground="#80848E"
                                               FontSize="12"
                                               Margin="0,0,0,16"/>
                                    
                                    <TextBlock Text="Instance URL" Foreground="#DBDEE1" FontSize="12" Margin="0,0,0,4"/>
                                    <TextBox x:Name="ManualInstanceUrl" 
                                             Background="#1E1F22"
                                             Foreground="#DBDEE1"
                                             BorderBrush="#4E5058"
                                             Padding="12"
                                             FontSize="13"
                                             Margin="0,0,0,12"/>
                                    
                                    <TextBlock Text="Access Token" Foreground="#DBDEE1" FontSize="12" Margin="0,0,0,4"/>
                                    <TextBox x:Name="ManualAccessToken" 
                                             Background="#1E1F22"
                                             Foreground="#DBDEE1"
                                             BorderBrush="#4E5058"
                                             Padding="12"
                                             FontSize="13"
                                             Margin="0,0,0,16"/>
                                    
                                    <Button Content="Connect"
                                            Click="ManualConnect_Click"
                                            Style="{StaticResource SecondaryButton}"
                                            Height="40"
                                            Padding="20,0"/>
                                </StackPanel>
                            </Border>
                        </Expander>
                    </StackPanel>
                    
                    <!-- Security Notice -->
                    <Border Background="#FFFFFF" Opacity="0.05" 
                            CornerRadius="12" Padding="20" Margin="0,40,0,0">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="ShieldLockOutline" 
                                                     Width="24" Height="24" 
                                                     Foreground="#10B981" 
                                                     VerticalAlignment="Center"
                                                     Margin="0,0,12,0"/>
                            <StackPanel>
                                <TextBlock Text="Secure OAuth 2.0 Login" 
                                           FontSize="15" 
                                           FontWeight="SemiBold" 
                                           Foreground="#F9FAFB"
                                           Margin="0,0,0,4"/>
                                <TextBlock Text="No passwords stored â€¢ SSO &amp; MFA supported â€¢ Official Salesforce login" 
                                           FontSize="13" 
                                           Foreground="#9CA3AF"
                                           TextWrapping="Wrap"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>
            
            <!-- Feature Cards - Responsive Wrap -->
            <ItemsControl Grid.Row="2">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel Orientation="Horizontal" HorizontalAlignment="Center"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.Items>
                    
                    <!-- Feature 1: Setup -->
                    <Border Style="{StaticResource FeatureCard}" Width="280" Margin="8">
                    <StackPanel>
                        <Border Background="#5865F2" CornerRadius="10" 
                                Width="48" Height="48" 
                                HorizontalAlignment="Center"
                                Margin="0,0,0,20">
                            <TextBlock Text="âš¡" FontSize="28" 
                                       HorizontalAlignment="Center" 
                                       VerticalAlignment="Center"/>
                        </Border>
                        <TextBlock Text="Spin Your Web in 30 Seconds" 
                                   FontSize="20" 
                                   FontWeight="SemiBold" 
                                   Foreground="#DBDEE1"
                                   HorizontalAlignment="Center"
                                   Margin="0,0,0,12"/>
                        <TextBlock Text="Set up debug logging faster than a spider spins silk." 
                                   FontSize="15" 
                                   Foreground="#B5BAC1"
                                   TextWrapping="Wrap"
                                   TextAlignment="Center"
                                   LineHeight="24"/>
                    </StackPanel>
                </Border>
                
                <!-- Feature 2: Analyze -->
                <Border Style="{StaticResource FeatureCard}" Width="280" Margin="8">
                    <StackPanel>
                        <Border Background="#8B5CF6" CornerRadius="10" 
                                Width="48" Height="48" 
                                HorizontalAlignment="Center"
                                Margin="0,0,0,20">
                            <TextBlock Text="ðŸ”" FontSize="28" 
                                       HorizontalAlignment="Center" 
                                       VerticalAlignment="Center"/>
                        </Border>
                        <TextBlock Text="Strike Fast, Kill Bugs Dead" 
                                   FontSize="20" 
                                   FontWeight="SemiBold" 
                                   Foreground="#DBDEE1"
                                   HorizontalAlignment="Center"
                                   Margin="0,0,0,12"/>
                        <TextBlock Text="Pinpoint performance killers instantly. Like venom, but for code." 
                                   FontSize="15" 
                                   Foreground="#B5BAC1"
                                   TextWrapping="Wrap"
                                   TextAlignment="Center"
                                   LineHeight="24"/>
                    </StackPanel>
                </Border>
                
                <!-- Feature 3: Plain English -->
                <Border Style="{StaticResource FeatureCard}" Width="280" Margin="8">
                    <StackPanel>
                        <Border Background="#3BA55D" CornerRadius="10" 
                                Width="48" Height="48" 
                                HorizontalAlignment="Center"
                                Margin="0,0,0,20">
                            <TextBlock Text="ðŸ“š" FontSize="28" 
                                       HorizontalAlignment="Center" 
                                       VerticalAlignment="Center"/>
                        </Border>
                        <TextBlock Text="Every Bug Gets Caught" 
                                   FontSize="20" 
                                   FontWeight="SemiBold" 
                                   Foreground="#DBDEE1"
                                   HorizontalAlignment="Center"
                                   Margin="0,0,0,12"
                                   TextWrapping="Wrap"/>
                        <TextBlock Text="Plain English summaries. No jargon. Bugs can't hide in complexity." 
                                   FontSize="15" 
                                   Foreground="#B5BAC1"
                                   TextWrapping="Wrap"
                                   TextAlignment="Center"
                                   LineHeight="24"/>
                    </StackPanel>
                </Border>
                
                </ItemsControl.Items>
            </ItemsControl>
            </Grid>
        </ScrollViewer>
        
        <!-- Recent Connections (Hidden until needed, positioned top-right) -->
        <Border x:Name="RecentConnectionsPanel" 
                Visibility="Collapsed"
                Style="{StaticResource GlassCard}"
                MaxWidth="360"
                Padding="24"
                VerticalAlignment="Top"
                HorizontalAlignment="Right"
                Margin="64,64,64,0">
            <StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                    <materialDesign:PackIcon Kind="History" 
                                           Width="20" Height="20" 
                                           Foreground="#6366F1"
                                           VerticalAlignment="Center"
                                           Margin="0,0,8,0"/>
                    <TextBlock Text="Recent Connections" 
                               FontSize="16" 
                               FontWeight="SemiBold" 
                               Foreground="#F9FAFB"/>
                </StackPanel>
                
                <ItemsControl x:Name="RecentConnectionsList">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Button Click="ReconnectButton_Click"
                                    Tag="{Binding}"
                                    Style="{StaticResource SecondaryButton}"
                                    HorizontalContentAlignment="Stretch"
                                    Margin="0,0,0,8"
                                    Height="Auto"
                                    Padding="16,12">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <materialDesign:PackIcon Grid.Column="0"
                                                           Kind="{Binding Icon}" 
                                                           Width="20" 
                                                           Height="20" 
                                                           VerticalAlignment="Center"
                                                           Foreground="#6366F1"
                                                           Margin="0,0,12,0"/>
                                    
                                    <StackPanel Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Left">
                                        <TextBlock Text="{Binding OrgName}" 
                                                 FontSize="14" 
                                                 FontWeight="SemiBold"
                                                 Foreground="#F9FAFB"/>
                                        <TextBlock Text="{Binding LastUsed}" 
                                                 FontSize="11" 
                                                 Foreground="#9CA3AF"
                                                 Margin="0,2,0,0"/>
                                    </StackPanel>
                                </Grid>
                            </Button>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
                
                <TextBlock x:Name="NoRecentConnectionsText"
                           Text="No recent connections yet"
                           Foreground="#6B7280"
                           FontSize="13"
                           HorizontalAlignment="Center"
                           Margin="0,8"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
